    <style>
        h1 {
            margin-top: 20px;
        }
        .smaller-table {
            font-size: 0.8em; /* Adjust as needed */
            width: 80%; /* Adjust as needed */
            margin: auto;
        }
        .smaller-table th, .smaller-table td {
            padding: 5px; /* Adjust as needed */
        }
    </style>
    <h1 style="text-align: center;">List of Admins</h1>
    <button onclick="showNewAdmin()" style="margin-bottom: 20px; padding: 10px 20px; font-size: 16px; color: white; background-color: #007BFF; border: none; border-radius: 5px; cursor: pointer;">Add New Admin</button>
    <table id="adminTable" class="table table-striped smaller-table" style="width:100%">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Fullname</th>
                <th scope="col">Age</th>
                <th scope="col">Address</th>
                <th scope="col">Gender</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    `;

            // Fetch the admin data from the server using AJAX
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'fetch_admins.php', true);
            xhr.onload = function () {
                if (this.status == 200) {
                    // Parse the JSON data
                    var admins = JSON.parse(this.responseText);

                    // Get the table body
                    var tbody = document.querySelector('#adminTable tbody');

                    // Insert the admin data into the table
                    for (var i = 0; i < admins.length; i++) {
                        var tr = document.createElement('tr');
                        var fullname = `${admins[i].fname} ${admins[i].mname} ${admins[i].lname} ${admins[i].ename}`;
                        tr.innerHTML = `
            <th scope="row">${i + 1}</th>
            <td>${fullname}</td>
            <td>${admins[i].age}</td>
            <td>${admins[i].address}</td>
            <td>${admins[i].gender}</td>
        `;
                        tbody.appendChild(tr);
                    }

                    // Initialize DataTable
                    $('#adminTable').DataTable();
                }
            };
            xhr.send();
        }

        function showNewAdmin() {
            var mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = ` 
    <style>
        h3 {
            margin-top: 20px;
        }
    </style>
        <h3>Admin Submitter Form</h3>
            <div class="registration-form">
                <form id="adminForm">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="fname">First Name:</label>
                                <input type="text" class="form-control item" id="fname" name="fname" placeholder="Example: Juan" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="mname">Middle Name:</label>
                                <input type="text" class="form-control item" id="mname" name="mname" placeholder="Example: Dela" required>
                            </div>
                        </div>
                        <div class="col-md-4"> 
                            <div class="form-group">
                                <label for="lname">Last Name:</label>
                                <input type="text" class="form-control item" id="lname" name="lname" placeholder="Example: Cruz" required>
                            </div>
                        </div>  
                        <div class="col-md-4">    
                            <div class="form-group">
                                <label for="ename">Extension Name:</label>
                                <input type="text" class="form-control item" id="ename" name="ename" placeholder="Example: Sr.">
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="nickname">Display name:</label>
                                <input type="text" class="form-control item" id="nickname" name="nickname" placeholder="Example: Tutu" required>
                            </div>
                        </div>
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="age">Age:</label>
                                <input type="number" class="form-control item" id="age" name="age" placeholder="Example: 12" required>
                            </div>
                        </div>
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="gender">Gender:</label>
                                <select class="form-control item" id="gender" name="gender" required>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="birthdate">Birthdate:</label>
                                <input type="date" class="form-control item" id="birthdate" name="birthdate" placeholder="Example: 01/01/2001" required>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="address">Address:</label>
                                <input type="text" class="form-control item" id="address" name="address" placeholder="Example: Purok. Pinetree, Brgy. Oringao, Kabankalan City, Negros Occidental." required>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="username">Username:</label>
                                <input type="text" class="form-control item" id="username" name="username" placeholder="Example: @JuanFGSNHS" required>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="password">Password:</label>
                                <input type="password" class="form-control item" id="password" name="password" placeholder="" required>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="role">Role:</label>
                                <input type="text" class="form-control item" id="role" name="role" value="Admin" readonly>
                            </div>
                        </div>    
                        <div class="col-md-4">  
                            <div class="form-group">
                                <label for="img">Profile Image Filename:</label>
                                <input type="text" class="form-control item" id="img" name="img" placeholder="Example: juan.jpg">
                            </div>
                        </div>    
                        <div class="col-md-8">
                            <div class="form-group mt-4">
                                <button type="submit" class="btn btn-primary">Create Account</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
    `;

            // Get the form element
            var form = document.getElementById('adminForm');

            // Attach a submit event handler to the form
            form.addEventListener('submit', function (event) {
                // Prevent the form from being submitted normally
                event.preventDefault();

                // Ask for confirmation before submitting
                Swal.fire({
                    title: 'Is the information correct?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, submit it!',
                    cancelButtonText: 'No, review it'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Create a new FormData object from the form
                        var formData = new FormData(form);

                        // Use AJAX to submit the form data
                        var request = new XMLHttpRequest();
                        request.open('POST', 'adbconn.php');
                        request.onreadystatechange = function () {
                            if (request.readyState === 4 && request.status === 200) {
                                // The request has completed successfully
                                var response = JSON.parse(request.responseText);
                                if (response.success) {
                                    Swal.fire(
                                        'Success!',
                                        response.message,
                                        'success'
                                    ).then(() => {
                                        // Call showAdmin() after the success message
                                        showAdmin();
                                    });
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Error',
                                        text: response.message
                                    });
                                }

                                // Reset the form fields
                                form.reset();
                            }
                        };
                        request.send(formData);
                    }
                });
            });
        }


        //Student
        function showManageClass() {
            var mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
    <style>
        h1 {
            margin-top: 20px;
        }
        .smaller-table {
            font-size: 0.8em; /* Adjust as needed */
            width: 80%; /* Adjust as needed */
            margin: auto;
        }
        .smaller-table th, .smaller-table td {
            padding: 5px; /* Adjust as needed */
        }
    </style>
    <h1 style="text-align: center;">List of Students</h1>
    <button onclick="showAddUser()" style="margin-bottom: 20px; padding: 10px 20px; font-size: 16px; color: white; background-color: #007BFF; border: none; border-radius: 5px; cursor: pointer;">Add New Student</button>
    <table id="studentTable" class="table table-striped smaller-table" style="width:100%">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Full Name</th>
                <th scope="col">Age</th>
                <th scope="col">Gender</th>
                <th scope="col">Birthdate</th>
                <th scope="col">Address</th>
                <th scope="col">Year Level</th>
                <th scope="col">Section</th>
                <th scope="col">Subjects</th>
                <th scope="col">Email</th>
                <th scope="col">LRN</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    `;

            // Fetch the student data from the server using AJAX
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'fetch_data.php', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send();

            xhr.onload = function () {
                if (this.status === 200) {
                    // Parse the JSON data
                    var students = JSON.parse(this.responseText);

                    // Get the table body
                    var tbody = document.querySelector('#studentTable tbody');

                    // Insert the student data into the table
                    for (var i = 0; i < students.length; i++) {
                        var tr = document.createElement('tr');
                        var fullname = students[i].fullname;
                        tr.innerHTML = `
                    <th scope="row">${i + 1}</th>
                    <td>${fullname}</td>
                    <td>${students[i].age}</td>
                    <td>${students[i].gender}</td>
                    <td>${students[i].birthdate}</td>
                    <td>${students[i].address}</td>
                    <td>${students[i].year_level}</td>
                    <td>${students[i].section}</td>
                    <td>${students[i].subjects || 'No subjects'}</td>
                    <td>${students[i].email}</td>
                    <td>${students[i].lrn}</td>
                `;
                        tbody.appendChild(tr);
                    }

                    // Initialize DataTable
                    $('#studentTable').DataTable();
                }
            };
        }



        function showAddUser() {
            var mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = ` <?php include 'conn.php'; ?>
    <style>
        h3 {
            margin-top: 20px;
        }
        .row {
            margin-bottom: 20px;
        }
    </style>
    <h3>Student Submitter Form</h3> 
    <div class="registration-form">
        <form id="studentForm">
            <div class="row">
                <!-- form fields as defined earlier -->
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="fname">First Name:</label>
                        <input type="text" class="form-control item" id="fname" name="fname" placeholder="Example: Juan" required>
                    </div>
                </div> 
                <div class="col-md-4">   
                    <div class="form-group">
                        <label for="mname">Middle Name:</label>
                        <input type="text" class="form-control item" id="mname" name="mname" placeholder="Example: Dela" required>
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="lname">Last Name:</label>
                        <input type="text" class="form-control item" id="lname" name="lname" placeholder="Example: Crunchy" required>
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ename">Extension Name:</label>
                        <input type="text" class="form-control item" id="ename" name="ename" placeholder="Example: Sr.">
                    </div>
                </div>  
                <div class="col-md-4">  
                    <div class="form-group">
                        <label for="pname">Parent's name:</label>
                        <input type="text" class="form-control item" id="pname" name="pname" placeholder="Example: Pname" required>
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control item" id="email" name="email" placeholder="Example: jpg@gmail.com" >
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="lrn">Lrn:</label>
                        <input type="text" class="form-control item" id="lrn" name="lrn" placeholder="Example: LRN" required>
                    </div>
                </div> 
                <div class="col-md-4">   
                    <div class="form-group">
                        <label for="nickname">Display Name:</label>
                        <input type="text" class="form-control item" id="nickname" name="nickname" placeholder="Example: Tutu" required>
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" class="form-control item" id="age" name="age" placeholder="Example: 12" required>
                    </div>
                </div>   
                <div class="col-md-4"> 
                    <div class="form-group">
                        <label for="gender">Gender:</label>
                        <select class="form-control item" id="gender" name="gender" required>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                </div>   
                <div class="col-md-4"> 
                    <div class="form-group">
                        <label for="birthdate">Birthdate:</label>
                        <input type="date" class="form-control item" id="birthdate" name="birthdate" placeholder="Example: 01/01/2001" required>
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" class="form-control item" id="address" name="address" placeholder="Example: Purok. Pinetree, Brgy. Oringao, Kabankalan City, Negros Occidental." required>
                    </div>
                </div>   
                <div class="col-md-4"> 
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" class="form-control item" id="username" name="username" placeholder="Example: @JuanFGSNHS" required>
                    </div>
                </div>  
                <div class="col-md-4">  
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" class="form-control item" id="password" name="password" placeholder="" required>
                    </div>
                </div>   
                <div class="col-md-4"> 
                    <div class="form-group">
                        <label for="role">Role:</label>
                        <input type="text" class="form-control item" id="role" name="role" value="student" readonly>
                    </div>
                </div>  
                <div class="col-md-4"> 
                    <div class="form-group">
                        <label for="img">Image:</label>
                        <input type="text" class="form-control item" id="img" name="img" placeholder="Example: image.jpg">
                    </div>
                </div>    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="section">Section:</label>
                        <input type="text" class="form-control item" id="section" name="section" placeholder="Example: Sardonyx" required>
                    </div>
                </div> 
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="year_level">Year Level:</label>
                        <select class="form-control item" id="year_level" name="year_level">
                            <option value="grade9">Grade 9</option>
                            <option value="grade10">Grade 10</option>
                        </select>
                    </div>
                </div>    
                <div class="col-md-8">
                    <div class="form-group mt-4">
                        <button type="submit" class="btn btn-primary">Create Class</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    `;

            // Get the form element
            var form = document.getElementById('studentForm');

            // Attach a submit event handler to the form
            form.addEventListener('submit', function (event) {
                // Prevent the form from being submitted normally
                event.preventDefault();

                // Ask for confirmation before submitting
                Swal.fire({
                    title: 'Is the information correct?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, submit it!',
                    cancelButtonText: 'No, review it'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Create a new FormData object from the form
                        var formData = new FormData(form);

                        // Use AJAX to submit the form data
                        var request = new XMLHttpRequest();
                        request.open('POST', 'submit.php');
                        request.onreadystatechange = function () {
                            if (request.readyState === 4 && request.status === 200) {
                                // The request has completed successfully
                                if (this.responseText.includes('Error: A user with the same username already exists.')) {
                                    Swal.fire(
                                        'Error!',
                                        'A user with the same username already exists.',
                                        'error'
                                    );
                                } else if (this.responseText.includes('Error: A user with the same full name already exists.')) {
                                    Swal.fire(
                                        'Error!',
                                        'A user with the same full name already exists.',
                                        'error'
                                    );
                                } else {
                                    Swal.fire({
                                        title: 'Success!',
                                        text: 'New record created successfully',
                                        icon: 'success',
                                        confirmButtonText: 'OK'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            showManageClass();
                                        }
                                    });

                                    // Reset the form fields
                                    form.reset();
                                }
                            }
                        };
                        request.send(formData);
                    }
                });
            });
        }


        //Teacher
        function showFaculty() {
            var mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
    <style>
        h1 {
            margin-top: 20px;
        }
        .smaller-table {
            font-size: 0.8em; /* Adjust as needed */
            width: 80%; /* Adjust as needed */
            margin: auto;
        }
        .smaller-table th, .smaller-table td {
            padding: 5px; /* Adjust as needed */
        }
    </style>
    <h1 style="text-align: center;">List of Teachers</h1>
    <button onclick="showNewTeacher()" style="margin-bottom: 20px; padding: 10px 20px; font-size: 16px; color: white; background-color: #007BFF; border: none; border-radius: 5px; cursor: pointer;">Add New Teacher</button>
    <table id="facultyTable" class="table table-striped smaller-table" style="width:100%">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Fullname</th>
                <th scope="col">Age</th>
                <th scope="col">Address</th>
                <th scope="col">Gender</th>
                <th scope="col">Subjects</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    `;

            // Fetch the faculty data from the server using AJAX
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'fetch_teachers.php', true);
            xhr.onload = function () {
                if (this.status == 200) {
                    // Parse the JSON data
                    var teachers = JSON.parse(this.responseText);

                    // Get the table body
                    var tbody = document.querySelector('#facultyTable tbody');

                    // Insert the teacher data into the table
                    for (var i = 0; i < teachers.length; i++) {
                        var tr = document.createElement('tr');
                        var fullname = `${teachers[i].fname} ${teachers[i].mname} ${teachers[i].lname} ${teachers[i].ename}`;
                        tr.innerHTML = `
                    <th scope="row">${i + 1}</th>
                    <td>${fullname}</td>
                    <td>${teachers[i].age}</td>
                    <td>${teachers[i].address}</td>
                    <td>${teachers[i].gender}</td>
                    <td>${teachers[i].subjects || 'No subjects'}</td>
                `;
                        tbody.appendChild(tr);
                    }

                    // Initialize DataTable
                    $('#facultyTable').DataTable();
                }
            };
            xhr.send();
        }


        function showNewTeacher() {
            var mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `  <?php include 'conn.php'; ?>
    <style>
        h3 {
            margin-top: 20px;
        }
        .smaller-table {
            font-size: 0.8em; /* Adjust as needed */
            width: 80%; /* Adjust as needed */
            margin: auto;
        }
        .smaller-table th, .smaller-table td {
            padding: 5px; /* Adjust as needed */
        }
    </style>
    <h3>Teacher Submitter Form</h3>
    <div class="registration-form">
        <form id="teacherForm">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="fname">First Name:</label>
                        <input type="text" class="form-control item" id="fname" name="fname" placeholder="Example: Juan" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="mname">Middle Name:</label>
                        <input type="text" class="form-control item" id="mname" name="mname" placeholder="Example: Dela" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="lname">Last Name:</label>
                        <input type="text" class="form-control item" id="lname" name="lname" placeholder="Example: Crunchy" required>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ename">Extension Name:</label>
                        <input type="text" class="form-control item" id="ename" name="ename" placeholder="Example: Sr.">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="nickname">Display name:</label>
                        <input type="text" class="form-control item" id="nickname" name="nickname" placeholder="Example: Tutu" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" class="form-control item" id="age" name="age" placeholder="Example: 12" required>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="gender">Gender:</label>
                        <select class="form-control item" id="gender" name="gender" required>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="birthdate">Birthdate:</label>
                        <input type="date" class="form-control item" id="birthdate" name="birthdate" placeholder="Example: 01/01/2001" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" class="form-control item" id="address" name="address" placeholder="Example: Purok. Pinetree, Brgy. Oringao, Kabankalan City, Negros Occidental." required>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" class="form-control item" id="username" name="username" placeholder="Example: @JuanFGSNHS" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" class="form-control item" id="password" name="password" placeholder="" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="role">Role:</label>
                        <input type="text" class="form-control item" id="role" name="role" value="teacher" readonly>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="img">Profile Image URL:</label>
                        <input type="text" class="form-control item" id="img" name="img" placeholder="Example: juan.jpg" required>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="form-group mt-4">
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    `;

            // Get the form element
            var form = document.getElementById('teacherForm');

            // Attach a submit event handler to the form
            form.addEventListener('submit', function (event) {
                // Prevent the form from being submitted normally
                event.preventDefault();

                // Ask for confirmation before submitting
                Swal.fire({
                    title: 'Is the information correct?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, submit it!',
                    cancelButtonText: 'No, review it'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Create a new FormData object from the form
                        var formData = new FormData(form);

                        // Use AJAX to submit the form data
                        var request = new XMLHttpRequest();
                        request.open('POST', 'tdbconn.php');
                        request.onreadystatechange = function () {
                            if (request.readyState === 4 && request.status === 200) {
                                // The request has completed successfully
                                var response = JSON.parse(request.responseText);
                                if (response.success) {
                                    Swal.fire({
                                        title: 'Success!',
                                        text: response.message,
                                        icon: 'success',
                                        confirmButtonText: 'OK'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            showFaculty();
                                        }
                                    });
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Error',
                                        text: response.message
                                    });
                                }

                                // Reset the form fields
                                form.reset();
                            }
                        };
                        request.send(formData);
                    }
                });
            });
        }

        teacher:
        <script>
            var loggedInUserId = <?php echo json_encode($loggedInUserId); ?>;
    
            var newClassFormHtml = <?php echo json_encode($newClassFormHtml); ?>;
    
            function confirmLogout() {
                return confirm("Are you sure you want to logout?");
            }
    
    
            function showNewClass() {
                var mainContent = document.getElementById('mainContent');
                mainContent.innerHTML = newClassFormHtml + `
                <div class="col-md-8">
                    <div class="form-group mt-4">
                        <button id="backBtn" class="btn btn-secondary">Back</button>
                    </div>
                </div>
            `;
    
                var form = document.getElementById('adminForm');
                form.addEventListener('submit', function (event) {
                    event.preventDefault();
    
                    var formData = new FormData(this);
    
                    fetch('subjectform.php', {
                        method: 'POST',
                        body: formData
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                Swal.fire({
                                    title: 'Success!',
                                    text: data.message,
                                    icon: 'success',
                                    confirmButtonText: 'OK'
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        showManageClass();
                                    }
                                });
                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Error',
                                    text: data.message
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'An error occurred while processing your request.'
                            });
                        });
                });
    
                document.getElementById('backBtn').addEventListener('click', showManageClass);
            }
    
            //This is for the Students and the subjects they have from the teacher 
            function showClasses() {
                var mainContent = document.getElementById('mainContent');
                mainContent.innerHTML = `
            <style>
                h1 { margin-top: 20px; }
                .smaller-table { font-size: 0.8em; width: 80%; margin: auto; }
                .smaller-table th, .smaller-table td { padding: 5px; }
                .add-class-btn { margin: 20px auto; display: flex; justify-content: center; }
            </style>
            <h1 style="text-align: center;">List of Classes</h1>
            <div class="add-class-btn">
                <button id="addClassBtn" class="btn btn-primary">Add Class</button>
            </div>
            <table id="classTable" class="table table-striped smaller-table" style="width:100%">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Subject Name</th>
                        <th scope="col">Year Level</th>
                        <th scope="col">Section</th>
                        <th scope="col">Created By</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        `;
    
                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'fetch_classes.php', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send('created_by=' + <?php echo $_SESSION['user']['user_id']; ?>);
    
                xhr.onload = function () {
                    if (this.status == 200) {
                        var classes = JSON.parse(this.responseText);
                        var tbody = document.querySelector('#classTable tbody');
    
                        for (var i = 0; i < classes.length; i++) {
                            var tr = document.createElement('tr');
                            tr.innerHTML = `
                        <th scope="row">${i + 1}</th>
                        <td>${classes[i].subject_name}</td>
                        <td>${classes[i].year_level}</td>
                        <td>${classes[i].section}</td>
                        <td>${classes[i].created_by_fullname}</td>
                        <td>
                        <button class="btn btn-info view-btn" data-year_level="${classes[i].year_level}" data-section="${classes[i].section}" data-subject="${classes[i].subject_name}">View</button>
                            <button class="btn btn-danger delete-btn" data-id="${classes[i].subject_id}">Delete</button>
                        </td>
                    `;
                            tbody.appendChild(tr);
                        }
    
                        $('#classTable').DataTable();
    
                        document.querySelectorAll('.delete-btn').forEach(button => {
                            button.addEventListener('click', function () {
                                var subjectId = this.getAttribute('data-id');
                                if (confirm('Are you sure you want to delete this class?')) {
                                    deleteClass(subjectId);
                                }
                            });
                        });
    
                        document.querySelectorAll('.view-btn').forEach(button => {
                            button.addEventListener('click', function () {
                                var yearLevel = this.getAttribute('data-year_level');
                                var section = this.getAttribute('data-section');
                                var subject = this.getAttribute('data-subject');
                                viewStudents(yearLevel, section, subject);
                            });
                        });
                    }
                };
    
                document.getElementById('addClassBtn').addEventListener('click', showNewClass);
            }
    
            //Delete button
            function deleteClass(subjectId) {
                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'delete_class.php', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send('subject_id=' + subjectId);
    
                xhr.onload = function () {
                    if (this.status == 200) {
                        var response = JSON.parse(this.responseText);
                        if (response.success) {
                            alert('Class deleted successfully.');
                            showClasses();
                        } else {
                            alert('Failed to delete class.');
                        }
                    }
                };
            }
    
            // LIST OF STUDENTS AND THEIR SUBJECTS
            function viewStudents(yearLevel, section, subject) {
                var mainContent = document.getElementById('mainContent');
                mainContent.innerHTML = `
            <style>
                h1 { margin-top: 20px; }
                .smaller-table { font-size: 0.8em; width: 80%; margin: auto; }
                .smaller-table th, .smaller-table td { padding: 5px; }
            </style>
            <h1 style="text-align: center;">Students in ${yearLevel} - ${section}</h1>
            <button id="backBtn" class="btn btn-secondary">Back</button>
            <table id="studentTable" class="table table-striped smaller-table" style="width:100%">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Full Name</th>
                        <th scope="col">Age</th>
                        <th scope="col">Gender</th>
                        <th scope="col">Birthdate</th>
                        <th scope="col">Address</th>
                        <th scope="col">Year Level</th>
                        <th scope="col">Section</th>
                        <th scope="col">Subject</th>
                        <th scope="col">Email</th>
                        <th scope="col">LRN</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        `;
    
                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'fetch_dteach.php', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.send(`year_level=${yearLevel}&section=${section}&subject=${subject}`);
                xhr.onload = function () {
                    if (this.status == 200) {
                        var students = JSON.parse(this.responseText);
                        var tbody = document.querySelector('#studentTable tbody');
    
                        for (var i = 0; i < students.length; i++) {
                            var tr = document.createElement('tr');
                            var fullname = `${students[i].fname} ${students[i].mname} ${students[i].lname}`;
                            tr.innerHTML = `
                        <th scope="row">${i + 1}</th>
                        <td>${fullname}</td>
                        <td>${students[i].age}</td>
                        <td>${students[i].gender}</td>
                        <td>${students[i].birthdate}</td>
                        <td>${students[i].address}</td>
                        <td>${students[i].year_level}</td>
                        <td>${students[i].section}</td>
                        <td>${students[i].subjects || 'No subjects'}</td>
                        <td>${students[i].email}</td>
                        <td>${students[i].lrn}</td>
                    `;
                            tbody.appendChild(tr);
                        }
    
                        $('#studentTable').DataTable();
                    }
                };
    
                document.getElementById('backBtn').addEventListener('click', showClasses);
            }
    
    
    
    
            //section selection
            function fetchSections(yearLevel) {
                $.ajax({
                    url: 'fetch_sections.php',
                    type: 'post',
                    data: { year_level: yearLevel },
                    success: function (response) {
                        $('#section').html(response);
                    }
                });
            }
    
            //year level selector
            function fetchYearLevels(section) {
                $.ajax({
                    url: 'fetch_year_level.php',
                    type: 'post',
                    data: { section: section },
                    success: function (response) {
                        $('#year_level').html(response);
                    }
                });
            }
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.0.8/datatables.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>